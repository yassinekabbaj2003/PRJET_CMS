!function(g){"use strict";etTheme.autoinit.variationGallery=etTheme.variationGallery=function(){var e,i,a,r,t=g(".variations_form"),o=0<g(t).length,n=t.data("product_id"),l=g(".images-wrapper").hasClass("swiper-vertical-images"),s=g(document).find(".quick-view-popup"),m=!!etConfig.woocommerceSettings.variationGalleryKeepVideo,d={reset_image:!1,reset_data:!1,reset_data_count:0,default_gallery:!1},c=(s.length&&(t=s.find(".variations_form")),e=t,i=n,o&&wp.ajax.send("et_get_default_variation_gallery",{data:{product_id:i},success:function(t){g(e).data("et_variation_gallery_default",t),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){g(window).trigger("resize")},500)},error:function(t){g(e).data("et_variation_gallery_default",[]),etTheme.et_notice("variationGalleryNotAvailable","error"," "+i+".")},complete:function(){d.default_gallery=!0}}),a=t,n=n,o&&wp.ajax.send("et_get_available_variation_images",{data:{product_id:n},success:function(t){g(a).data("et_variation_gallery_variation_images",r),!r||r.length<1?r=g(a).data("et_variation_gallery_default"):u(r)},error:function(t){g(a).data("et_variation_gallery_variation_images",[])}}),t.on("found_variation",function(t,e){var i,a,r,o;1==e.variation_gallery_images.length&&g(this).data("et_variation_gallery_default")&&1<=g(this).data("et_variation_gallery_default").length?g(this).data("et_variation_gallery_default")[0].url==e.variation_gallery_images[0].url?u(g(this).data("et_variation_gallery_default")):(i=g(document).find(".swiper-control-top .main-images .swiper-slide").first().find("a"),a=g(document).find(".thumbnails-list .thumbnail-item").first().find("a"),e.image.url&&(a&&a.attr("href",e.image.url),i)&&i.attr("href",e.image.url),e.image.src&&(a&&a.find("img").attr("src",e.image.src),i)&&(i.find("img").attr("src",e.image.src),e.image.full_src&&i.parent().find("img.zoomImg").attr("src",e.image.full_src),g.fn.zoom)&&!s.length&&wc_single_product_params.zoom_enabled&&(i.parent().trigger("zoom.destroy"),o=i.find("img"),r=g(i).parent().width(),o.data("large_image_width")>r)&&(o=g.extend({touch:!1},wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement?o.on="click":g(i).parent().zoom(o)),e.image.srcset&&(a&&a.find("img").attr("srcset",e.image.srcset),i)&&i.find("img").attr("srcset",e.image.srcset)):u(e.variation_gallery_images),c(),g(document).trigger("variable_product_found_variation")}).on("reset_image",function(t){d.reset_image=!0;let e=g(document).find(".swiper-control-top .main-images .swiper-slide").first().find("a");setTimeout(function(){e.parent().find("img.zoomImg").attr("src",e.attr("href")),e.find("img").attr("data-large_image",e.attr("href"))},700)}).on("reset_data",function(){d.default_gallery&&d.reset_data_count<1?d.reset_data_count++:(d.reset_data=!0,d.reset_data_count++,g(this).data("et_variation_gallery_default")&&u(g(this).data("et_variation_gallery_default")),c(),g(document).trigger("variable_product_found_variation"),d.default_gallery=!0)}),function(){var t=g(".main-images").data("Swiper"),e=g(".thumbnails-list").data("Swiper");void 0!==t&&etTheme.swipers["swiper-"+index].slideTo(0),l?g(".thumbnails-list").slick("slickGoTo",0):void 0!==e&&etTheme.swipers["swiper-"+index].slideTo(0)});function u(i){if(i&&o){var a=i.map(function(t){return wp.template("et-variation-gallery-thumbnail-template")(t)}).join("");g(".thumbnails-list").parent().removeClass("dt-hide mob-hide"),g(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").removeClass("dt-hide mob-hide"),g(".thumbnails-list.vertical-thumbnails").find(".slick-arrow").remove();let t=!0;m&&((r=g(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").find(".video-thumbnail")).length&&(t=!1),g(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").find(".thumbnail-item:has(img, picture)").remove(),"last"==etConfig.woocommerceSettings.product_video_position?r.first().before(a):r.last().after(a)),t&&g(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").html(a),i.length<=1&&(g(".swiper-wrapper.thumbnails-list").parent().addClass("dt-hide mob-hide"),g(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").addClass("dt-hide mob-hide"));var r=i.map(function(t){return wp.template("et-variation-gallery-slider-template")(t)}).join("");let e=!0;m&&((a=g(".swiper-control-top .main-images").find("video, iframe")).length&&(e=!1),g(".swiper-control-top .main-images").find(".images:has(.woocommerce-main-image), .swiper-slide:has(.woocommerce-main-image)").remove(),"last"==etConfig.woocommerceSettings.product_video_position?a.first().parent().before(r):a.last().parent().after(r)),e&&g(".swiper-control-top .main-images").html(r),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){l&&(g(".thumbnails-list.vertical-thumbnails .slick-arrow").remove(),g(".thumbnails-list.vertical-thumbnails").slick("reinit"),g(".pswp-main-image img").on("load",function(){g(".thumbnails-list.vertical-thumbnails").slick("reinit")})),g(window).trigger("resize")},500),g.fn.zoom&&!s.length&&wc_single_product_params.zoom_enabled&&g(".woocommerce-product-gallery__image").each(function(t,e){var i=g(e).width(),a=g(e).find("img");g(e).trigger("zoom.destroy"),a.data("large_image_width")>i&&(a=g.extend({touch:!1},wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement?a.on="click":g(e).zoom(a))})}}}}(jQuery);