var ApplyFilters;!function(l){"use strict";var s,d,o,r,c,m;ApplyFilters={init:function(){s={},o=!(d={}),r=l(".elementor-location-archive").length,c=r?".elementor-location-archive":".content-page",m=["woocommerce-archive-etheme_grid_list","woocommerce-etheme_archive_products","etheme_product_grid[data-settings*=current_query]","etheme_product_list[data-settings*=current_query]"],this.loadedParams(),this.CollectParams(),setTimeout(function(){l(".price_slider").parents("form").addClass("et-reinited")},100)},SetupClass:function(e){var t=e.parents("li");e.parents("ul").hasClass("st-swatch-preview")?t.addClass("selected chosen"):e.parents(".sidebar-widget").hasClass("etheme_widget_brands")||e.parents(".sidebar-widget").hasClass("etheme_widget_cats")?t.addClass("current-item"):t.addClass("chosen")},loadedParams:function(){l.each(ApplyFilters.GetUrlParams(location.href),function(e,t){t&&"undefined"!=t&&(s[e]?s[e].includes(t)||(s[e]+=","+t,d[e]+=","+t):(s[e]=t,d[e]=t))}),s&&(o=!0)},GetUrlParams:function(e){var t={},a=document.createElement("a"),e=(a.href=e,a.search.substring(1));if(!e)return!1;var i=e.split("&");for(let e=0;e<i.length;e++){var n=i[e].split("=");t[n[0]]=decodeURIComponent(n[1])}return t},ReinitPriceSlider:function(){if(l(".price_slider").length){if("undefined"==typeof woocommerce_price_slider_params)return!1;l("input#min_price, input#max_price").hide(),l(".price_slider, .price_label").show();let e=l(".price_slider_amount #min_price"),t=l(".price_slider_amount #max_price"),a=e.data("min"),i=t.data("max"),n=parseInt(e.val()?e.val():a,10),r=parseInt(t.val()?t.val():i,10);d.min_price&&(n=d.min_price),d.max_price&&(r=d.max_price),l(".price_slider").slider({range:!0,animate:!0,min:a,max:i,values:[n,r],create:function(){e.val(n),t.val(r),l(document.body).trigger("price_slider_create",[n,r])},slide:function(e,t){l("input#min_price").val(t.values[0]),l("input#max_price").val(t.values[1]),l(document.body).trigger("price_slider_slide",[t.values[0],t.values[1]])},change:function(e,t){l(document.body).trigger("price_slider_change",[t.values[0],t.values[1]])}})}setTimeout(function(){l(".price_slider").parents("form").addClass("et-reinited")},100)},ajaxRequest:function(){if(Object.keys(d).length&&!o){let e=window.location.href;var n=e.split("?")[0];e=e.split("?")[0]+"?et_ajax=true",l.ajax({url:e,method:"GET",timeout:1e5,dataType:"text",beforeSend:function(){r?l.each(m,function(e,t){"woocommerce-archive-etheme_grid_list"!=t&&(l(c).find(".elementor-widget-"+t+"[data-settings*=fadeInUp_animation]").addClass("etheme-reloading"),l(c).find(".elementor-widget-"+t+"[data-settings*=skeleton_animation]").addClass("etheme-reloading").addClass("etheme-skeleton-loading"),l(c).find(".elementor-widget-"+t+":not([data-settings*=fadeInUp_animation]):not([data-settings*=skeleton_animation])").addClass("etheme-loading"))}):(l(".sidebar.et-mini-content.active").removeClass("active"),l(".et-toggle-mob-sidebars-wrapper").removeClass("et-content-shown"))},success:function(e){if(r){let r=!1,s=!1;l.each(l(e).find(c).find('[data-element_type="widget"]'),function(e,t){var a=".elementor-element",t=l(t);if(t.length){if(-1<l.inArray(t.attr("data-widget_type").replace(".default",""),m)){var i=t.is("[data-settings*=fadeInUp_animation]"),n=t.is("[data-settings*=skeleton_animation]");if(i||n){let a=i?100:0;t.find(".type-product").each(function(e,t){l(t).css("transition-delay",e*a+"ms").addClass("etheme-post-product-loading")})}}t.hasClass("elementor-widget-etheme_sidebar_horizontal")&&(r=!0,s=l(document).find(a+'[data-id="'+t.attr("data-id")+'"]').find(".etheme-elementor-sidebar").hasClass("filters-opened")),l(document).find(a+'[data-id="'+t.attr("data-id")+'"]').html(t.html()).removeClass("etheme-reloading");let e=l(document).find(a+'[data-id="'+l(t).attr("data-id")+'"]');e.removeClass("etheme-reloading etheme-loading etheme-skeleton-loading"),-1<l.inArray(e.attr("data-widget_type").replace(".default",""),m)&&(n=t.is("[data-settings*=fadeInUp_animation]"),i=t.is("[data-settings*=skeleton_animation]"),(n||i)&&(setTimeout(function(){e.find(".type-product").removeClass("etheme-post-product-loading")},300),setTimeout(function(){e.find(".type-product").attr("style",null)},700)),i)&&(e.addClass("etheme-skeleton-loaded"),setTimeout(function(){e.removeClass("etheme-skeleton-loaded")},700)),window.elementorFrontend&&elementorFrontend.elementsHandler.runReadyTrigger(e)}}),r&&(t=l(document).find(".elementor-widget-etheme_sidebar_horizontal_toggle")).length&&(t.addClass("etheme-elementor-reinit"),s&&l(document).find(".etheme-elementor-sidebar-horizontal").removeClass("hidden").attr("style",null).addClass("filters-opened"),window.elementorFrontend)&&elementorFrontend.elementsHandler.runReadyTrigger(t),l(e).find(".etheme-elementor-sticky-column").length&&l(e).find(".etheme-elementor-sticky-column").each(function(e,t){elementorFrontend.elementsHandler.runReadyTrigger(t)})}else{var t=l(e).find(".sidebar").html();l(".content-page .sidebar").html(t)}l(e).find(".widget_shopping_cart_content").length&&l(document.body).trigger("wc_fragment_refresh");var t=l(document).find(".etheme-active-filters").next("div").attr("id"),a=l(document).find(".etheme-active-filters").prev("div").attr("id"),i=l(document).find(".etheme-active-filters").clone();l(document).find(".etheme-active-filters")||(t?l(document).find("#"+t).before(i):a&&l(document).find("#"+a).before(i)),l.each(d,function(a,e){var t=e.split(",");1<t.length?l.each(t,function(e,t){ApplyFilters.SetupClass(l(document).find('a[href="'+n+"?"+a+"="+t+'"]'))}):ApplyFilters.SetupClass(l(document).find('a[href="'+n+"?"+a+"="+e+'"]'))}),jQuery().selectWoo&&l.each(l("select.woocommerce-widget-layered-nav-dropdown"),function(){var e=l(this);jQuery(e).selectWoo({minimumResultsForSearch:5,width:"100%",language:{noResults:function(){}}})}),"undefined"==typeof woocommerce_price_slider_params&&(t=l(e).find(".et_woocommerce_price_slider_params").html(),l("body").prepend(t)),etTheme.AjaxElement(),l(document).trigger("et_ajax_content_loaded")},error:function(e){etTheme.et_notice("ajax-filters","error")},complete:function(){l(".et-loader.product-ajax").removeClass("loading"),void 0!==etTheme.reinitSwatches&&etTheme.reinitSwatches(),void 0!==etTheme.contentProdImages&&etTheme.contentProdImages(),void 0!==window.hoverSlider&&(window.hoverSlider.init({}),window.hoverSlider.prepareMarkup()),void 0!==etTheme.countdown&&etTheme.countdown(),l("body").removeClass("swc-default-done"),void 0!==etTheme.widgetsOpenCloseDefault&&etTheme.widgetsOpenCloseDefault(),ApplyFilters.ReinitPriceSlider(),etTheme.resizeVideo(),etTheme.swiperFunc(),etTheme.secondInitSwipers(),etTheme.customCss(),etTheme.customCssOne(),void 0!==etTheme.sidebarCanvas&&etTheme.sidebarCanvas(),void 0!==etTheme.stickySidebar&&l(document.body).trigger("sticky_kit:recalc"),l(document).trigger("yith_wcwl_reload_fragments"),l("body").removeClass("ajax-progress"),etTheme.global_image_lazy(),void 0!==etTheme.widgetsShowMore&&etTheme.widgetsShowMore()}})}},CollectParams:function(){var e=c+" .etheme-ajax-filter,"+c+" .etheme_swatches_filter ul li a,"+c+" .woocommerce-widget-layered-nav ul li a,"+c+" .widget_rating_filter ul li a,"+c+" .widget_layered_nav_filters ul li a,"+c+" .etheme_widget_brands_filter ul li a,"+c+" .etheme_widget_cats_filter ul li a,"+c+" .etheme-price-filter li a";l(document).on("click",e,function(a){o=!1;var i=l(this),n=i.parents("li"),r=!1;if(i.parents("div").hasClass("etheme-active-filters"))"undefined"!=typeof ajaxFilters?(a.preventDefault(),d=s={},ajaxFilters.load_data(i.attr("href"),function(){})):location.href=url;else{a.preventDefault(),i.parents("ul").hasClass("st-swatch-preview")?n.hasClass("selected")?(n.removeClass("selected"),r=!0):n.addClass("selected"):i.parents(".sidebar-widget").hasClass("etheme_widget_brands")||i.parents(".sidebar-widget").hasClass("etheme_widget_cats")?n.hasClass("current-item")?(r=!0,n.removeClass("current-item")):n.addClass("current-item"):i.parents(".sidebar-widget").hasClass("etheme-price-filter")?(n.hasClass("chosen")?(r=!0,n):n.addClass("chosen").siblings("li")).removeClass("chosen"):n.hasClass("chosen")?(r=!0,n.removeClass("chosen")):n.addClass("chosen");let e=l(this).attr("href"),t=window.location.href;l(this).hasClass("remove-brand")||l(this).parents(".widget_layered_nav_filters").hasClass("etheme-active-filters")||1<t.indexOf("filter_brand")&&(a=new URL(t).searchParams.get("filter_brand"),e=e.replace("?","?filter_brand="+a+"&"));i=ApplyFilters.GetUrlParams(e);l.each(i,function(a,e){var t;a&&(r?(s[a]&&(!e||"undefined"==e||""==e)||e==s[a]?delete s[a]:s[a].includes(e)&&(s[a]=s[a].replace(e,"").replace(",,",","),","==s[a].charAt(0)&&(s[a]=s[a].substring(1)),","==s[a].slice(-1))&&(s[a]=s[a].slice(0,-1)),""==s[a]&&delete s[a]):s[a]?s[a].includes(e)||(e.includes(",")?(t=e.split(","),l.each(t,function(e,t){s[a].includes(t)||(s[a]+=","+t)})):s[a]+=","+e):s[a]=e)}),l.each(["min_price","max_price"],function(e,t){var a;s[t]&&(a=s[t].split(","),s[t]=a[a.length-1])}),Object.keys(s).length?l(document).find(".etheme_apply_all_filters").removeClass("hidden"):l(document).find(".etheme_apply_all_filters").addClass("hidden")}}),l(document).on("input change",".etheme-price-filter .price-filter-box input",function(){var e=l(this).attr("name"),t=l(this).val();t&&(s[e]=t,l(this).parents(".etheme-price-filter").find("li").removeClass("chosen")),Object.keys(s).length?l(document).find(".etheme_apply_all_filters").removeClass("hidden"):l(document).find(".etheme_apply_all_filters").addClass("hidden")}),l(document).on("price_slider_change",function(){o=!1,l(".et-reset-price").removeClass("hidden");var e=l(this).find(".etheme-price-filter form").first();!e||e.length<1||!e.hasClass("et-reinited")||(e=e.attr("action")+"?"+e.serialize(),e=ApplyFilters.GetUrlParams(e),l.each(e,function(e,t){"et_ajax"!=e&&"undefined"!=t&&(s[e]=t)}),Object.keys(s).length?l(document).find(".etheme_apply_all_filters").removeClass("hidden"):l(document).find(".etheme_apply_all_filters").addClass("hidden"))}),l(document).on("change",c+" select.woocommerce-widget-layered-nav-dropdown",function(e){o=!1;let t=l(this),a=t.attr("class"),i="";a=a.split(" "),l.each(a,function(e,t){t.includes("dropdown_layered_nav_")&&(i=t.replace("dropdown_layered_nav_",""))}),i="filter_"+i,s[i]=t.val(),Object.keys(s).length?l(document).find(".etheme_apply_all_filters").removeClass("hidden"):l(document).find(".etheme_apply_all_filters").addClass("hidden")}),l(document).on("click",".etheme-all-filter",function(e){e.preventDefault(),l(".etheme-elementor-pagination, .etheme-elementor-lazy-button-wrapper").remove(),o=!1;let a=l(this).attr("href");e=new URL(a);e.search="",a=e+"?",l.each(s,function(e,t){a+=e+"="+t+"&"}),"&"==a.slice(-1)&&(a=a.slice(0,-1)),"undefined"!=typeof ajaxFilters?(d=s,console.log(a),ajaxFilters.load_data(a)):location.href=a})}},l(document).ready(function(){ApplyFilters.init()})}(jQuery);