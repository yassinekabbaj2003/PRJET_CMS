window.et_panel=window.et_panel||{},function(e){e(document).ready(function(o){window.et_panel=Object.assign(window.et_panel,{plugins_page_actions:function(e,t){var a,n,i,r,l,s;o(".xstore-panel-grid-item-nonce").length&&(e.attr("data-redirect")?window.location=e.attr("data-redirect"):(a=e.parents(".xstore-panel-grid-item"),n=a.attr("data-filter"),i=o(".error-text").text(),r={action:"envato_setup_plugins",helper:"plugins",type:"et_plugins_actions",slug:e.attr("data-slug"),wpnonce:o(document).find(".xstore-panel-grid-item-nonce").attr("data-plugin-nonce")},l=e.attr("data-action"),s=a.find(".xstore-panel-grid-item-action-text"),o(".et_filesystem").attr("data-filesystem")?(o(".xstore-panel-grid-item-control").css({"pointer-events":"none"}),a.addClass("in_progress"),s.text(s.attr("data-"+l)),"deactivate"==l?(r.action="et_plugins_actions",r.type=l,o.ajax({method:"POST",url:ajaxurl,data:r,success:function(e){n=n.replace("active","disabled"),a.attr("data-filter",n),a.removeClass("xstore-panel-grid-item-active"),a.removeClass("in_progress"),a.find('.xstore-panel-grid-item-control[data-action="activate"]').removeClass("hidden"),a.find('.xstore-panel-grid-item-control[data-action="deactivate"]').addClass("hidden"),o('.plugin-filter[data-filter="all"]').trigger("click"),et_panel.et_delete_transient("etheme_plugins_info")},error:function(e){s.text(""),a.removeClass("in_progress"),alert(i)},complete:function(e){o(".xstore-panel-grid-item-control").css({"pointer-events":"all"}),s.text("")}})):o.ajax({method:"POST",url:ajaxurl,data:r,success:function(e){""!=e.hash?o.ajax({method:"POST",url:e.url,data:e,success:function(e){e=et_panel.check_data(e);switch(e?alert(e):(a.find('.xstore-panel-grid-item-control[data-action="update"]').addClass("hidden"),a.find('.xstore-panel-grid-item-control[data-action="activate"]').addClass("hidden"),a.find('.xstore-panel-grid-item-control[data-action="install"]').addClass("hidden"),a.find('.xstore-panel-grid-item-control[data-action="deactivate"]').removeClass("hidden")),n=n.replace("disabled","active"),a.attr("data-filter",n),a.addClass("xstore-panel-grid-item-active"),a.removeClass("in_progress"),o('.plugin-filter[data-filter="all"]').trigger("click"),l){case"update":a.find(".current-version").html("v."+a.find(".new-version").html()),a.find(".new-version-text").addClass("hidden");break;case"install":alert("The plugin has been successfully installed!")}a.attr("data-redirect")&&(window.location=a.attr("data-redirect"))},error:function(){a.removeClass("in_progress"),s.text(""),alert(i)},complete:function(){o(".xstore-panel-grid-item-control").css({"pointer-events":"all"}),s.text("")}}):(s.text(""),alert(i))},error:function(e){s.text(""),alert(i)},complete:function(e){}})):alert(i)))},check_data:function(e){return e.includes("Destination folder already exists")?"Plugin installation failed, destination folder already exists":e.includes("Plugin installation failed")||e.includes("An error occurred while installing")?"Plugin installation failed":!!e.includes("We are unable to connect to the XStore API with the XStore theme. Please check your SSL certificate or white lists.")&&"We are sorry to inform you that the XStore theme is unable to connect to the XStore API. Please check your internet connection, server whitelists and SSL certificate."},et_delete_transient:function(e){e={action:"et_delete_transient",helper:"plugins",transient:e,wpnonce:o(document).find(".xstore-panel-grid-item-nonce").attr("data-plugin-nonce")};o.ajax({method:"POST",url:ajaxurl,data:e,success:function(e){},error:function(e){},complete:function(e){}})},plugins_plugins_search:function(e,t){et_panel.panel_global_search(e,".etheme-search",".xstore-panel-grid-item",".xstore-panel-grid-item-name",function(){o(".xstore-panel-grid-item").removeClass("et-hide").removeClass("et-show"),o('.et-filter[data-filter="all"]').trigger("click")})},plugins_plugins_filter:function(e,t){let a=e.attr("data-filter");o(".plugin-filter").removeClass("active"),e.addClass("active"),o.each(o(".xstore-panel-grid-item"),function(){var e=o(this);e.attr("data-active-filter",a),-1!=e.attr("data-filter").indexOf(a)?e.removeClass("et-hide").removeClass("et-show"):e.removeClass("et-show").addClass("et-hide")}),e.parent().removeClass("active")}});var e={1:{selector:".xstore-panel-grid-item-control",type:"click",callback:et_panel.plugins_page_actions},2:{selector:".etheme-plugin-search",type:"keyup",callback:et_panel.plugins_plugins_search},3:{selector:".plugin-filter",type:"click",callback:et_panel.plugins_plugins_filter}};o.each(e,function(e,t){"ready"==t.type?o(document).ready(function(e){t.callback(o(this),e)}):o(t.selector).on(t.type,function(e){t.callback(o(this),e)})})})}(jQuery,window.et_panel);