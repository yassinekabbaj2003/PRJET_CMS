jQuery(document).ready(function(s){var o={i:0,j:0},r=(s(document).on("change",'form.xstore-panel-settings[data-in-popup="yes"]',function(t){s(this).data("et_triggered")||(s(this).find('button[type="submit"]').removeClass("et-button-grey2").attr("style",null),s(this).data("et_triggered","yes"))}),s(document).on("keyup keydown",'form.xstore-panel-settings[data-in-popup="yes"] textarea, form.xstore-panel-settings[data-in-popup="yes"] input',function(t){var e=s(this).parents("form.xstore-panel-settings");s(e).data("et_triggered")||(s(e).find('button[type="submit"]').removeClass("et-button-grey2").attr("style",null),s(e).data("et_triggered","yes"))}),s(document).on("click",'form.xstore-panel-settings[data-in-popup="yes"] .xstore-panel-repeater .add-item, form.xstore-panel-settings[data-in-popup="yes"] .xstore-panel-repeater .remove-item',function(t){var e=s(this).parents("form.xstore-panel-settings");s(e).data("et_triggered")||(s(e).find('button[type="submit"]').removeClass("et-button-grey2").attr("style",null),s(e).data("et_triggered","yes"))}),s(document).on("submit","form.xstore-panel-settings",function(t){t.preventDefault();var e=[],n=[],t=s(this).attr("data-settings-name"),a=s(this).attr("data-save-tab"),i=s(this).attr("data-in-popup"),o=i?s(this).parent():s(this).parent().parent().find(".et-tabs-content");i?s(this).find('button[type="submit"]').addClass("loading"):et_panel.popup_configuration.openPopup(),o.each(function(){var t=i?a:s(this).attr("data-tab-content");a&&t!==a||"import"!==t&&(e.push(t),s(this).find(".xstore-panel-sortable, .xstore-panel-repeater").each(function(){var t=s(this).find(".xstore-panel-sortable-items").sortable("toArray",{attribute:"data-name"});s(this).find(".option-val").val(t)}),t=(t=s(this).find("form").serializeArray()).concat(s(this).find(".xstore-panel-option-switcher input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:""}}).get()),n.push(t))}),r(e,n,t,i)}),function(t,n,a,i){s.ajax({method:"POST",url:XStorePanelSettingsConfig.ajaxurl,dataType:"JSON",data:{action:"xstore_panel_settings_save",settings:n[o.i],type:t[o.i],_nonce:XStorePanelSettingsConfig.nonce,settings_name:a},success:function(e){if(e.success)if(t.slice(o.i,t.length),n.slice(o.i,n.length),o.i<t.length)r(t,n,a,i),o.i++;else{if(i){et_panel.popup_configuration.popup.find("button[type=submit]").removeClass("loading");let t=et_panel.popup_configuration.popup.find(".saving-alert");t.text(s(e.msg).text()).removeClass("et-error hidden").slideDown(),setTimeout(function(){t.slideUp()},5e3)}else et_panel.popup_configuration.closePopup(e);o.i=0}else if(i){et_panel.popup_configuration.popup.find("button[type=submit]").removeClass("loading");let t=et_panel.popup_configuration.popup.find(".saving-alert");t.text(s(e.msg).text()).addClass("et-error").removeClass("hidden").slideDown(),setTimeout(function(){t.slideUp()},5e3)}else et_panel.popup_configuration.closePopup(e)},error:function(){o.i=0,alert(XStorePanelSettingsConfig.ajaxError)}})})});