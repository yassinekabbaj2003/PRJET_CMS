!function(o){var t=o("#vc_ui-panel-edit-element");function e(e){var t=e.parent(".et-td-wrapper");e.hasClass("vc_dependent-hidden")?t.addClass("vc_dependent-hidden"):t.removeClass("vc_dependent-hidden")}t.on("vcPanel.shown",function(){var e;"undefined"!=typeof tinyMCE&&(tinyMCE.get("wpb_tinymce_content")&&(e=(e=tinyMCE.get("wpb_tinymce_content").getContent()).replace(/<\/p><p>\s<\/p>/g,"</p>")),tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,"wpb_tinymce_content")),o(".vc_wrapper-param-type-xstore_title_divider").each(function(){var e=o(this),t=e.nextUntil(".vc_wrapper-param-type-xstore_title_divider"),a=o('<div class="et-td-wrapper"></div>'),n=o('<div class="et-td-content"></div>');e.before(a),a.append(e),t.length&&(n.append(t),a.append(n)),e.hasClass("css_box_tabs")&&(t=o('<div class="et-tabs-css-wrapper"><span class="et_tab mtips active" data-query="global"><i class="vc-composer-icon vc-c-icon-layout_default"></i><span class="mt-mes">Desktop</span></span><span class="et_tab mtips" data-query="tablet"><i class="vc-composer-icon vc-c-icon-layout_landscape-tablets"></i><span class="mt-mes">Tablet landscape</span></span><span class="et_tab mtips" data-query="ipad"><i class="vc-composer-icon vc-c-icon-layout_portrait-tablets"></i><span class="mt-mes">Tablet portrait</span></span><span class="et_tab mtips" data-query="mobile"><i class="vc-composer-icon vc-c-icon-layout_portrait-smartphones"></i><span class="mt-mes">Mobile</span></span></div>'),e.append(t))}),"undefined"!=typeof tinyMCE&&(tinyMCE.EditorManager.execCommand("mceAddEditor",!0,"wpb_tinymce_content"),void 0!==e)&&tinyMCE.get("wpb_tinymce_content").setContent(e),t.trigger("etDivider.added")}),o(document).ajaxComplete(function(e,t,a){200==t.status&&t.responseText&&void 0!==a.data&&"string"==typeof a.data&&0<=a.data.indexOf("action=vc_edit_form")&&wp.media&&wp.media.view.Modal.prototype.on("close",function(){setTimeout(function(){o(".supports-drag-drop").css("display","none")},1e3)})}),t.on("click",".et-tabs-css-wrapper .et_tab",function(){o(this).parent().find(".et_tab").removeClass("active"),o(this).addClass("active"),o(this).parents(".et-td-wrapper").find(".et_css-query").addClass("vc_dependent-hidden"),o(this).parents(".et-td-wrapper").find(".et_css-query-"+o(this).attr("data-query")).removeClass("vc_dependent-hidden")}),t.on("change",".wpb_el_type_xstore_title_divider",function(){e(o(this))}),t.on("etDivider.added",function(){o(".wpb_el_type_xstore_title_divider").each(function(){e(o(this))})}),o("#vc_ui-panel-edit-element").on("vcPanel.shown",function(){function e(n){0!=n.newOptSelector.length&&o.each(n.oldSizes,function(e,t){var a;t.val()&&(a=parseInt(t.val()),a=t.val().replace(a,""),n.newOptSelector.find(".xstore-rs-unit select").val(a),void 0===n.responsive?n.newOptSelector.find('input[data-id="desktop"], input[data-id="tablet"], input[data-id="mobile"]').val(parseFloat(t.val())):(n.newOptSelector.find('input[data-id="desktop"]').val(parseFloat(t.val())),n.newOptSelector.find('input[data-id="tablet"]').val(parseFloat(n.responsive.tablet)),n.newOptSelector.find('input[data-id="mobile"]').val(parseFloat(n.responsive.mobile))),n.newOptSelector.find(".xstore-rs-item").removeClass("hidden"),n.newOptSelector.find(".xstore-rs-trigger").addClass("opened"),n.newOptSelector.find(".xstore-rs-value").val(""),t.val(""))})}function i(e){var t=e.find(".xstore-rs-value"),n={param_type:"xstore_responsive_size",data:{}},i=e.find(".xstore-rs-unit select").val();n.data.units=i=null==i?"":i,e.find(".xstore-rs-input").each(function(e,t){var a=o(t).val(),t=o(t).data("id");a&&(n.data[t]=a+i)}),n=o.isEmptyObject(n.data)?"":window.btoa(JSON.stringify(n)),t.val(n).trigger("change")}o(this).find(".vc_shortcode-param").each(function(){var e=o(this),t=e.data("param_settings");void 0!==t&&void 0!==t.hint&&e.find(".wpb_element_label").addClass("with-mtips").append('<span class="mtips mtips-right"><span class="dashicons dashicons-editor-help" style="vertical-align: -20%;margin-left: 3px;cursor: help;"></span><span class="mt-mes">'+t.hint+"</span></span>")}),o(".xstore-vc-slider").each(function(){var e=o(this),t=e.find("input.xstore-slider-field-value"),a=e.find(".xstore-slider-field-value");t.on("change input",function(){a.html(o(this).val())})}),e({oldSizes:{desktop:o('[data-vc-shortcode-param-name="title_font_container"] .vc_font_container_form_field-font_size-input'),tablet:o('[data-vc-shortcode-param-name="title_font_container"] .vc_font_container_form_field-font_size-input'),mobile:o('[data-vc-shortcode-param-name="title_font_container"] .vc_font_container_form_field-font_size-input')},newOptSelector:o(".title_responsive_font_size")}),e({oldSizes:{desktop:o('[data-vc-shortcode-param-name="subtitle_font_container"] .vc_font_container_form_field-font_size-input'),tablet:o('[data-vc-shortcode-param-name="subtitle_font_container"] .vc_font_container_form_field-font_size-input'),mobile:o('[data-vc-shortcode-param-name="subtitle_font_container"] .vc_font_container_form_field-font_size-input')},newOptSelector:o(".subtitle_responsive_font_size")}),e({oldSizes:{desktop:o(".et_old-title-font_size-wrapper input.wpb_vc_param_value"),tablet:o(".et_old-title-font_size-wrapper input.wpb_vc_param_value"),mobile:o(".et_old-title-font_size-wrapper input.wpb_vc_param_value")},newOptSelector:o(".title_responsive_font_size"),responsive:{tablet:"32px",mobile:"24px"}}),e({oldSizes:{desktop:o(".et_old-subtitle-font_size-wrapper input.wpb_vc_param_value"),tablet:o(".et_old-subtitle-font_size-wrapper input.wpb_vc_param_value"),mobile:o(".et_old-subtitle-font_size-wrapper input.wpb_vc_param_value")},newOptSelector:o(".subtitle_responsive_font_size")}),e({oldSizes:{desktop:o('[data-vc-shortcode-param-name="title_font_container"] .vc_font_container_form_field-line_height-input'),tablet:o('[data-vc-shortcode-param-name="title_font_container"] .vc_font_container_form_field-line_height-input'),mobile:o('[data-vc-shortcode-param-name="title_font_container"] .vc_font_container_form_field-line_height-input')},newOptSelector:o(".title_responsive_line_height")}),e({oldSizes:{desktop:o('[data-vc-shortcode-param-name="subtitle_font_container"] .vc_font_container_form_field-line_height-input'),tablet:o('[data-vc-shortcode-param-name="subtitle_font_container"] .vc_font_container_form_field-line_height-input'),mobile:o('[data-vc-shortcode-param-name="subtitle_font_container"] .vc_font_container_form_field-line_height-input')},newOptSelector:o(".subtitle_responsive_line_height")}),e({oldSizes:{desktop:o(".et_old-title-line_height-wrapper input.wpb_vc_param_value"),tablet:o(".et_old-title-line_height-wrapper input.wpb_vc_param_value"),mobile:o(".et_old-title-line_height-wrapper input.wpb_vc_param_value")},newOptSelector:o(".title_responsive_line_height"),responsive:{tablet:"36px",mobile:"28px"}}),e({oldSizes:{desktop:o(".et_old-subtitle-line_height-wrapper input.wpb_vc_param_value"),tablet:o(".et_old-subtitle-line_height-wrapper input.wpb_vc_param_value"),mobile:o(".et_old-subtitle-line_height-wrapper input.wpb_vc_param_value")},newOptSelector:o(".subtitle_responsive_line_height")}),e({oldSizes:{desktop:o(".et_old-title-letter_spacing-wrapper input.wpb_vc_param_value"),tablet:o(".et_old-title-letter_spacing-wrapper input.wpb_vc_param_value"),mobile:o(".et_old-title-letter_spacing-wrapper input.wpb_vc_param_value")},newOptSelector:o(".title_responsive_letter_spacing")}),e({oldSizes:{desktop:o(".et_old-subtitle-letter_spacing-wrapper input.wpb_vc_param_value"),tablet:o(".et_old-subtitle-letter_spacing-wrapper input.wpb_vc_param_value"),mobile:o(".et_old-subtitle-letter_spacing-wrapper input.wpb_vc_param_value")},newOptSelector:o(".subtitle_responsive_letter_spacing")}),o(".et_font-size-wrapper").each(function(){var e=o(this),t=o(this).parent().find(".vc_wrapper-param-type-font_container").find(".vc_font_container_form_field-font_size-container").parent(),a=o(this).parent().find(".et_old-font_size-wrapper");t.addClass("hidden").before(e),a.addClass("hidden").before(e)}),o(".et_line-height-wrapper").each(function(){var e=o(this),t=o(this).parent().find(".vc_wrapper-param-type-font_container").find(".vc_font_container_form_field-line_height-container").parent(),a=o(this).parent().find(".et_old-line_height-wrapper");t.addClass("hidden").before(e),a.addClass("hidden").before(e)}),o(".et_letter-spacing-wrapper").each(function(){var e=o(this),t=o(this).parent().find(".vc_wrapper-param-type-font_container").find(".vc_font_container_form_field-letter_spacing-container").parent(),a=o(this).parent().find(".et_old-letter_spacing-wrapper");t.addClass("hidden").before(e),a.addClass("hidden").before(e)}),o(".xstore-rs-wrapper").each(function(){var e,t=o(this),a=t,n=a.find(".xstore-rs-value").val(),s={};function e(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a}n&&(n=JSON.parse(window.atob(n)),o.each(n.data,function(n,i){a.find(".xstore-rs-input").each(function(e,t){var a=o(t).data("id");a==n&&(o(t).val(parseFloat(i)),s[a]=i)}),"units"==n&&a.find(".xstore-rs-unit select").val(i)})),2<=(e=e(s))&&a.find(".xstore-rs-item").removeClass("hidden"),i(t)}),o(".xstore-rs-input, .xstore-rs-unit select").on("change",function(){i(o(this).parents(".xstore-rs-wrapper"))}),o(".xstore-rs-trigger").on("click",function(){var e=o(this).parents(".xstore-rs-wrapper");o(this).toggleClass("opened"),e.find(".xstore-rs-item.tablet,.xstore-rs-item.mobile").toggleClass("hidden")}),o(".xstore-vc-image-select").each(function(){var e=o(this),a=e.find(".xstore-vc-image-select-input"),t=a.attr("value");e.find('li[data-value="'+t+'"]').addClass("active"),e.find("li").on("click",function(){var e=o(this),t=e.data("value");e.siblings().removeClass("active"),e.addClass("active"),a.attr("value",t).trigger("change")})}),o(".xstore-vc-button-set").each(function(){var e=o(this),t=(e.hasClass("et-font_container")?e.parent().find(".vc_font_container_form_field-"+o(this).data("type")+"-select"):e.find(".xstore-vc-button-set-value")).val();e.find('[data-value="'+t+'"]').addClass("active")}),o(".vc-button-set-item").on("click",function(){var e=o(this),t=e.parents(".xstore-vc-button-set"),a=e.data("value");e.addClass("active"),e.siblings().removeClass("active"),t.find(".xstore-vc-button-set-value").val(a).trigger("change"),t.hasClass("et-font_container")&&t.parent().find(".vc_font_container_form_field-"+o(t).data("type")+"-select").val(a).trigger("change")})}),o(document).on("click",".et_popup-import-single-page .et_popup-import-plugin-btn:not(.et_plugin-installing, .et_plugin-installed)",function(e){e.preventDefault();var n="",n=o(this).hasClass("et_core-plugin")?o(".etheme-registration"):o(".et_panel-popup.panel-popup-import.active, .et_panel-popup.et_popup-import-single-page"),i=o(this),s=i.parents("li"),e={action:"envato_setup_plugins",helper:"plugins",slug:i.attr("data-slug"),wpnonce:n.find(".et_plugin-nonce").attr("data-plugin-nonce")};n.find(".et_popup-import-plugins").addClass("ajax-processing"),i.addClass("et_plugin-installing"),s.addClass("processing"),o.ajax({method:"POST",url:ajaxurl,data:e,success:function(e){var t,a;""!=e.hash?(o.ajax({method:"POST",url:e.url,data:e,success:function(e){s.addClass("activated"),i.removeClass("et_plugin-installing").addClass("et_plugin-installed green-color").text("Activated").attr("style",null),i.parents(".et_popup-import-plugin").find(".dashicons").addClass("dashicons-yes-alt green-color hidden").removeClass("dashicons-warning orange-color red-color"),i.hasClass("et_core-plugin")&&(o(".etheme-page-nav .mtips").removeClass("inactive mtips"),window.location=o(".etheme-page-nav .et-nav-portfolio").attr("href"),i.css("pointer-events","none"),o(".mt-mes").remove())},error:function(){},complete:function(){s.removeClass("processing"),i.removeClass("loading"),n.find(".et_popup-import-plugins").removeClass("ajax-processing"),i.hasClass("et_second-try")?n.hasClass("et_popup-import-single-page")&&n.find(".et_install-page-content").removeClass("et-button-grey2").addClass("et-button-green").html(n.find(".et_install-page-content").attr("data-text")):(i.removeClass("et_plugin-installed").addClass("et_second-try"),i.trigger("click"))}}),"et-core-plugin"==e.slug&&e.ET_VERSION_COMPARE&&(o(".et_step-versions-compare").addClass("required"),a=(a=(t=o(".et-theme-version-info")).html()).replace("{{{version}}}",e.ET_CORE_THEME_MIN_VERSION),t.html(a),o("body").removeClass("et_step-child_theme-step"))):i.removeClass("et_plugin-installing").addClass("et_plugin-installed installing-error red-color").text("Failed").attr("style",null)},error:function(e){i.removeClass("et_plugin-installing").addClass("et_plugin-installed installing-error red-color").text("Failed").attr("style",null),s.removeClass("processing"),i.removeClass("loading"),n.find(".et_popup-import-plugins").removeClass("ajax-processing")},complete:function(e){}})})}(jQuery);