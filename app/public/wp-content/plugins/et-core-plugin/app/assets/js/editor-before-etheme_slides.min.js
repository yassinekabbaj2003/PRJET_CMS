!function(r,i,d){r(i).on("elementor:init",function(){class e extends i.$e.modules.hookUI.Before{getCommand(){return"document/save/update"}getId(){return"etheme_slides-before-update"}getConditions(e){return!0}apply(e,t){n(e)}}i.$e.hooks.registerUIBefore(new e);class t extends i.$e.modules.hookUI.Before{getCommand(){return"document/save/publish"}getId(){return"etheme_slides-before-publish"}getConditions(e){return!0}apply(e,t){n(e)}}function n(t){r("body").find("#generating-screenshot-alert").length?r("body").find("#generating-screenshot-alert").html(etElementorEditorSlidesConfig.screenshot.process).attr("data-type",null).addClass("visible"):(e=d.createElement("div"),d.body.appendChild(e),e.id="generating-screenshot-alert",e.className="etheme-elementor-info-alert visible",e.textContent=etElementorEditorSlidesConfig.screenshot.process);let n=t.document.config.urls.permalink;var e=["elementor_css_print_method_internal","centered_content","disable_animations","disable_lazyload","admin_bar","mobile_panel","back_top","header","footer"].join("|");s(n=n.includes("?")?n+"&et_iframe_preview="+e:n+"?et_iframe_preview="+e,t.document.id,!0).then(function(e){e?s(n,t.document.id,!1).then(function(e){o("success")}):o("success")})}function o(e){let t=r("body").find("#generating-screenshot-alert");"success"==e&&t.attr("data-type","success"),t.html("success"==e?etElementorEditorSlidesConfig.screenshot.success:etElementorEditorSlidesConfig.screenshot.error),setTimeout(function(){t.removeClass("visible")},1e3),setTimeout(function(){t.attr("data-type",null)},1500)}function s(e,o,s){var i=d.createElement("iframe");return i.src=e,i.style.cssText="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity:0; visibility: hidden; z-index: -9999; width: 100%; height: 100%;",d.body.appendChild(i),new Promise(function(n,t){i.onload=function(e){r(i.contentDocument).ready(function(e){r(i.contentWindow).trigger("resize scroll"),setTimeout(function(){html2canvas(i.contentDocument.documentElement,{}).then(function(e){d.body.appendChild(e);var t=e.toDataURL("image/jpeg",.1);r.ajax({url:etElementorEditorConfig.ajaxUrl,method:"POST",data:{image:t,action:"etheme_elementor_post_screenshot",postType:etElementorEditorSlidesConfig.screenshot.postType,postId:o},dataType:"html",success:function(){console.log("Screenshot pushed to server.")},complete:function(){}}),d.body.removeChild(i),d.body.removeChild(e),n(s)}).catch(t)},3e3)})},i.onerror=t})}i.$e.hooks.registerUIBefore(new t)})}(jQuery,window,document);